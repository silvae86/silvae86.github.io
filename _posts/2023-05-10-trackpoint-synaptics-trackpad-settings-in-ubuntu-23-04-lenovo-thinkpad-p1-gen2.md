---
layout: post
title:  "Lenovo P1 Gen 2 - My settings for the TrackPoint and Synaptics Touchpad"
date: 2022-11-19 14:04:000 +0100
tags: [lenovo, trackpoint, synaptics, thinkpad, p1 gen 2, settings, ubuntu, linux]
published: true
comments_id: 57
---

This post explains how to install the Synaptics driver on Ubuntu 23.04 and how to tune the sensitivity settings on a Lenovo P1 Gen 2. 

First, go [here](https://www.synaptics.com/products/displaylink-graphics/downloads/ubuntu) and install the synaptics driver for the touchpad. You will be prompted for a password that you need to enter again on a blue screen that will show up after the first reboot, since this driver lives in the UEFI.

## Configuration files

You then need to place a few files in certain locations. Every time you make changes to these files, you will have to  log out and login again for settings to be applied.

`sudo vim /etc/X11/xorg.conf.d/70-synaptics.conf`

````conf
# Example xorg.conf.d snippet that assigns the touchpad driver
# to all touchpads. See xorg.conf.d(5) for more information on
# InputClass.
# DO NOT EDIT THIS FILE, your distribution will likely overwrite
# it when updating. Copy (and rename) this file into
# /etc/X11/xorg.conf.d first.
# Additional options may be added in the form of
#   Option "OptionName" "value"
#
Section "InputClass"
        Identifier "touchpad catchall"
        MatchIsTouchpad "on"
# This option is recommend on all Linux systems using evdev, but cannot be
# enabled by default. See the following link for details:
# http://who-t.blogspot.com/2010/11/how-to-ignore-configuration-errors.html
       	MatchDevicePath "/dev/input/event*"
       	Option "PalmDetect" "1"
       	Option "PalmMinWidth" "10"
       	Option "PalmMinZ" "50"
       	Option "HorizTwoFingerScroll" "1"
	Option "MinSpeed"              "0.6"
        Option "MaxSpeed"              "2.3"
        Option "AccelFactor"           "0.11"
        Option "TapButton1"            "1"
        Option "TapButton2"            "2"     # multitouch
        Option "TapButton3"            "3"     # multitouch
        Option "VertTwoFingerScroll"   "1"     # multitouch
        Option "HorizTwoFingerScroll"  "1"     # multitouch
        Option "VertEdgeScroll"        "1"
        Option "CoastingSpeed"         "0"
        Option "CornerCoasting"        "1"
        Option "CircularScrolling"     "1"
        Option "CircScrollTrigger"     "7"
        Option "EdgeMotionUseAlways"   "1"
        Option "LBCornerButton"        "8"     # browser "back" btn
        Option "RBCornerButton"        "9"     # browser "forward" btn
EndSection

Section "InputClass"
        Identifier "touchpad ignore duplicates"
        MatchIsTouchpad "on"
        MatchOS "Linux"
        MatchDevicePath "/dev/input/mouse*"
        Option "Ignore" "on"
EndSection

# This option enables the bottom right corner to be a right button on clickpads
# and the right and middle top areas to be right / middle buttons on clickpads
# with a top button area.
# This option is only interpreted by clickpads.
Section "InputClass"
        Identifier "Default clickpad buttons"
        MatchDriver "synaptics"
        Option "SoftButtonAreas" "50% 0 82% 0 0 0 0 0"
        Option "SecondarySoftButtonAreas" "58% 0 0 15% 42% 58% 0 15%"
EndSection

# This option disables software buttons on Apple touchpads.
# This option is only interpreted by clickpads.
Section "InputClass"
        Identifier "Disable clickpad buttons on Apple touchpads"
        MatchProduct "Apple|bcm5974"
        MatchDriver "synaptics"
        Option "SoftButtonAreas" "0 0 0 0 0 0 0 0"
EndSection
````

`sudo vim /etc/X11/xorg.conf.d/90-trackpoint.conf`

````conf
Section "InputClass"  
    Identifier "libinput pointer catchall"  
    MatchIsPointer "on"  
    MatchDevicePath "/dev/input/event*"  
    Driver "libinput"  
    Option "AccelSpeed" "-1.25"  
EndSection   
````

`sudo vim /etc/udev/rules.d/10-trackpoint.rules`

````conf
ACTION=="add",  
SUBSYSTEM=="input",  
ATTR{name}=="TPPS/2 IBM TrackPoint",  
ATTR{device/sensitivity}="135",  
ATTR{device/speed}="120",  
ATTR{device/inertia}="4",  
ATTR{device/press_to_select}="0"
````

## Gnome settings

- In the Gnome Extensions app, go to "Keyboard and Mouse" and make sure that the mouse acceleration profile is "Flat".
- In the Gnome Setting app, make sure that the trackpad and mouse speed sliders are in the default (middle) position.

## References

[How to get the perfect TrackPoint experience on Linux](https://www.reddit.com/r/thinkpad/comments/5rcwlq/heres_how_to_get_the_perfect_trackpoint/)

